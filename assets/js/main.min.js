"use strict";function getMousePos(t){return{x:t.clientX,y:t.clientY}}function initArticleNav(t,e){document.onkeydown=function(n){switch(n=n||window.event,n.which||n.keyCode){case 37:document.querySelector(t).click();break;case 39:document.querySelector(e).click();break;default:return}n.preventDefault()}}function init(){if(!gInited){gInited=!0,zenscroll.toY(0);for(var t=document.querySelectorAll("section a"),e=0;e<t.length;e++)t[e].addEventListener("click",onSectionLinkClicked,!1);for(var n=document.querySelectorAll(".menu-panel a"),e=0;e<n.length;e++)n[e].addEventListener("click",onIndexLinkClicked,!1);for(var o=document.querySelectorAll(".intro-text a"),e=0;e<o.length;e++)o[e].addEventListener("click",onIndexLinkClicked,!1);var i=window.location.hash.substr();i.length>0&&setTimeout(function(){gotoToSectionWithAnchor(i)},500),document.querySelector(".animation-container").classList.remove("loaded"),setTimeout(function(){document.querySelector(".animation-container").classList.add("loaded")},30)}}function onIndexLinkClicked(t){document.querySelector(".navigation").classList.remove("active"),document.body.classList.remove("menu-open");var e=document.createElement("a");e.href=t.target.href,e.host===window.location.host&&e.pathname===window.location.pathname&&gotoToSectionWithAnchor(e.hash)}function onSectionLinkClicked(t){var e=t.target.closest("section");if(void 0!==e){var n=window.location.pathname+"#"+e.getAttribute("data-id");history.replaceState({},"",n);var o=document.createElement("a");o.href=t.target.href,o.host===window.location.host?o.pathname===window.location.pathname&&gotoToSectionWithAnchor(o.hash):(window.open(t.target.href,"_blank"),t.preventDefault())}}function gotoToSectionWithAnchor(t){var e=t.substr(1),n=document.querySelectorAll("[data-id='"+e+"']")[0];void 0!==n&&(n.classList.add("active"),zenscroll.to(n,300))}window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(t){var e,n=(this.document||this.ownerDocument).querySelectorAll(t),o=this;do for(e=n.length;--e>=0&&n.item(e)!==o;);while(e<0&&(o=o.parentElement));return o}),document.addEventListener("DOMContentLoaded",function(t){new Konami(function(){document.body.classList.add("konami")})}),window.onunload=window.onbeforeunload=function(){},window.onpageshow=function(t){init()},window.onpagehide=function(t){document.querySelector(".animation-container").classList.remove("loaded")};var gInited=!1;zenscroll.setup(200,0),document.addEventListener("DOMContentLoaded",function(t){init()});var Konami=function(t){var e={addEvent:function(t,e,n,o){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&(t["e"+e+n]=n,t[e+n]=function(){t["e"+e+n](window.event,o)},t.attachEvent("on"+e,t[e+n]))},input:"",pattern:"38384040373937396665",load:function(t){this.addEvent(document,"keydown",function(n,o){if(o&&(e=o),e.input+=n?n.keyCode:event.keyCode,e.input.length>e.pattern.length&&(e.input=e.input.substr(e.input.length-e.pattern.length)),e.input==e.pattern)return e.code(t),e.input="",n.preventDefault(),!1},this),this.iphone.load(t)},code:function(t){window.location=t},iphone:{start_x:0,start_y:0,stop_x:0,stop_y:0,tap:!1,capture:!1,orig_keys:"",keys:["UP","UP","DOWN","DOWN","LEFT","RIGHT","LEFT","RIGHT","TAP","TAP"],code:function(t){e.code(t)},load:function(t){this.orig_keys=this.keys,e.addEvent(document,"touchmove",function(t){if(1==t.touches.length&&1==e.iphone.capture){var n=t.touches[0];e.iphone.stop_x=n.pageX,e.iphone.stop_y=n.pageY,e.iphone.tap=!1,e.iphone.capture=!1,e.iphone.check_direction()}}),e.addEvent(document,"touchend",function(n){1==e.iphone.tap&&e.iphone.check_direction(t)},!1),e.addEvent(document,"touchstart",function(t){e.iphone.start_x=t.changedTouches[0].pageX,e.iphone.start_y=t.changedTouches[0].pageY,e.iphone.tap=!0,e.iphone.capture=!0})},check_direction:function(t){x_magnitude=Math.abs(this.start_x-this.stop_x),y_magnitude=Math.abs(this.start_y-this.stop_y),x=this.start_x-this.stop_x<0?"RIGHT":"LEFT",y=this.start_y-this.stop_y<0?"DOWN":"UP",result=x_magnitude>y_magnitude?x:y,result=1==this.tap?"TAP":result,result==this.keys[0]&&(this.keys=this.keys.slice(1,this.keys.length)),0==this.keys.length&&(this.keys=this.orig_keys,this.code(t))}}};return"string"==typeof t&&e.load(t),"function"==typeof t&&(e.code=t,e.load()),e};